#!/usr/bin/env node

var client = '../client'
var path = require('path')
var app = require('express')()
var static = require('serve-static')
var credential = require('config').mqtt.credential
var config = require('config').server
var http = require('http').Server(app)

app.use('/', static(path.resolve(__dirname, client)))

http.listen(config.port, function () {
  console.log('Server listening at port %d', config.port)
});

//TODO:Create test, extract logic
require('../server/ws').mqtt_connection(credential, http, config.port);



